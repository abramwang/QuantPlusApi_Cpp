# 交易接口说明

## 1 下单

接口原型：

```c++
int reqOrderInsert(TD_ReqOrderInsert* req)
```

参数说明：

| 参数名称 | 数据类型               | 说明                                       |
| ---- | ------------------ | ---------------------------------------- |
| req  | TD_ReqOrderInsert* | 下单数据信息                                   |
| 返回值  | int                | 返回不为0，请求失败，错误码（参考[数据字典](https://github.com/abramwang/QuantPlusApi_Cpp/blob/master/doc/%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8.md)11） |

TD_ReqOrderInsert结构说明：

| 字段名            | 数据类型            | 说明                                       |
| -------------- | --------------- | ---------------------------------------- |
| nReqId         | int             | 请求ID（由用户维护的ID）                           |
| nStragetyId    | int64_t         | 保留字段                                     |
| nUserInt       | int             | 保留字段                                     |
| nUserDouble    | double          | 保留字段                                     |
| szUseStr       | TD_Text         | 保留字段                                     |
| nUserId        | int64_t         | 用户帐号Id(API自动内部赋值)                        |
| szClientId     | TD_ClientIdType | 客户端编号(由服务器生成并赋值)                         |
| szContractCode | TD_CodeType     | 证券合约代码                                   |
| szContractName | TD_CodeName     | 证券合约名称                                   |
| nTradeType     | TD_TradeType    | 交易类型（参考[数据字典](https://github.com/abramwang/QuantPlusApi_Cpp/blob/master/doc/%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8.md)8） |
| nOffsetType    | TD_OffsetType   | 开平仓类型（ 参考[数据字典](https://github.com/abramwang/QuantPlusApi_Cpp/blob/master/doc/%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8.md)9 ） |
| nOrderPrice    | int             | 委托价                                      |
| nOrderVol      | int             | 委托量                                      |
| nOrderNum      | int             | 订单分笔数                                    |
| pOrderDetail   | TD_OrderDetail* | 订单明细（ 如需指定资金账号下单，需要填对应的资金账号id以及下到该资金账号的委托数量 ） |
| nCloseR        | int             | 是否是风控强平（ 0正常平仓,1为风控干预平仓,2为服务器风控策略达到强平位平仓 ） |

TD_OrderDetail结构说明

| 字段名               | 数据类型               | 说明                              |
| ----------------- | ------------------ | ------------------------------- |
| szOrderStreamId   | TD_OrderIdType     | 委托编号（broker 或交易所的唯一编号）          |
| nAccountId        | int                | 券商资金账户Id                        |
| szAccountNickName | TD_AccountType     | 资金账户别名                          |
| nOrderVol         | int                | 委托申报量                           |
| nDealedPrice      | int                | 成交均价  * 10000                   |
| nDealedVol        | int                | 成交量                             |
| nWithDrawnVol     | int                | 撤单数量                            |
| szOrderTime       | TD_ISODateTimeType | 委托时间 ( 格式 yyyy-MM-dd hh:mm:ss ) |
| nStatus           | TD_OrderStatusType | 状态                              |
| szText            | TD_Text            | 备注                              |
| nFee              | double             | 手续费                             |

| 自定义类型              | 原类型        |
| ------------------ | ---------- |
| TD_Text            | char [128] |
| TD_ClientIdType    | char [128] |
| TD_CodeType        | char [32]  |
| TD_CodeName        | char [32]  |
| TD_OrderIdType     | char [64]  |
| TD_ISODateTimeType | char[21]   |
|                    |            |

## 2 撤单

接口原型：

```c++
int reqOrderDelete(TD_ReqOrderDelete* req)
```

参数说明：

| 参数名称 | 数据类型               | 说明                                       |
| ---- | ------------------ | ---------------------------------------- |
| req  | TD_ReqOrderDelete* | 撤单数据信息                                   |
| 返回值  | int                | 返回不为0，请求失败， 错误码（参考[数据字典](https://github.com/abramwang/QuantPlusApi_Cpp/blob/master/doc/%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8.md)11） |

TD_ReqOrderDelete结构说明：

| 字段名             | 数据类型            | 说明                     |
| --------------- | --------------- | ---------------------- |
| nReqId          | int             | 请求ID（由用户维护的ID）         |
| nStragetyId     | int64_t         | 保留字段                   |
| nUserInt        | int             | 保留字段                   |
| nUserDouble     | double          | 保留字段                   |
| szUseStr        | TD_Text         | 保留字段                   |
| nUserId         | int64_t         | 用户帐号Id(API自动内部赋值)      |
| szClientId      | TD_ClientIdType | 客户端编号(由服务器生成并赋值)       |
| nOrderId        | int64_t         | 原始订单服务器唯一Id            |
| szOrderStreamId | TD_OrderIdType  | 委托编号（broker 或交易所的唯一编号） |

| 自定义类型           | 原类型        |
| --------------- | ---------- |
| TD_Text         | char [128] |
| TD_ClientIdType | char [128] |
| TD_OrderIdType  | char [64]  |
|                 |            |
[注]: szOrderStreamId允许为空，为空时默认撤nOrderId下所有子单

## 3 查询委托

接口原型：

```c++
int reqQryOrder(TD_ReqQryOrder* req) 
```

参数说明：

| 参数名称 | 数据类型            | 说明                                       |
| ---- | --------------- | ---------------------------------------- |
| req  | TD_ReqQryOrder* | 查询委托数据信息                                 |
| 返回值  | int             | 返回不为0，请求失败， 错误码（参考[数据字典](https://github.com/abramwang/QuantPlusApi_Cpp/blob/master/doc/%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8.md)11） |

TD_ReqQryOrder结构说明：

| 字段名            | 数据类型            | 说明                |
| -------------- | --------------- | ----------------- |
| nReqId         | int             | 请求ID（由用户维护的ID）    |
| nStragetyId    | int64_t         | 保留字段              |
| nUserInt       | int             | 保留字段              |
| nUserDouble    | double          | 保留字段              |
| szUseStr       | TD_Text         | 保留字段              |
| nUserId        | int64_t         | 用户帐号Id(API自动内部赋值) |
| szClientId     | TD_ClientIdType | 客户端编号(由服务器生成并赋值)  |
| szContractCode | TD_CodeType     | 证券合约代码            |
| nIndex         | int             | 起始位置(不填默认从头开始)    |
| nNum           | int             | 数量（不填默认查全部）       |

| 自定义类型           | 原类型        |
| --------------- | ---------- |
| TD_Text         | char [128] |
| TD_ClientIdType | char [128] |
| TD_CodeType     | char [32]  |
|                 |            |
## 4 查询成交明细

接口原型：

```c++
int reqQryMatch(TD_ReqQryMatch* req) 
```

参数说明：

| 参数名称 | 数据类型            | 说明                                       |
| ---- | --------------- | ---------------------------------------- |
| req  | TD_ReqQryMatch* | 查询成交数据信息                                 |
| 返回值  | int             | 返回不为0，请求失败， 错误码（参考[数据字典](https://github.com/abramwang/QuantPlusApi_Cpp/blob/master/doc/%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8.md)11） |

TD_ReqQryMatch结构说明：

| 字段名            | 数据类型            | 说明                |
| -------------- | --------------- | ----------------- |
| nReqId         | int             | 请求ID（由用户维护的ID）    |
| nStragetyId    | int64_t         | 保留字段              |
| nUserInt       | int             | 保留字段              |
| nUserDouble    | double          | 保留字段              |
| szUseStr       | TD_Text         | 保留字段              |
| nUserId        | int64_t         | 用户帐号Id(API自动内部赋值) |
| szClientId     | TD_ClientIdType | 客户端编号(由服务器生成并赋值)  |
| szContractCode | TD_CodeType     | 证券合约代码            |
| nIndex         | int             | 起始位置(不填默认从头开始)    |
| nNum           | int             | 数量（不填默认查全部）       |

| 自定义类型           | 原类型        |
| --------------- | ---------- |
| TD_Text         | char [128] |
| TD_ClientIdType | char [128] |
| TD_CodeType     | char [32]  |
|                 |            |
## 5 查询持仓

接口原型：

```c++
int reqQryPosition(TD_ReqQryPosition* req) 
```

参数说明：

| 参数名称 | 数据类型               | 说明                                       |
| ---- | ------------------ | ---------------------------------------- |
| req  | TD_ReqQryPosition* | 查询持仓数据信息                                 |
| 返回值  | int                | 返回不为0，请求失败， 错误码（参考[数据字典](https://github.com/abramwang/QuantPlusApi_Cpp/blob/master/doc/%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8.md)11） |

TD_ReqQryPosition结构说明：

| 字段名            | 数据类型            | 说明                |
| -------------- | --------------- | ----------------- |
| nReqId         | int             | 请求ID（由用户维护的ID）    |
| nStragetyId    | int64_t         | 保留字段              |
| nUserInt       | int             | 保留字段              |
| nUserDouble    | double          | 保留字段              |
| szUseStr       | TD_Text         | 保留字段              |
| nUserId        | int64_t         | 用户帐号Id(API自动内部赋值) |
| szClientId     | TD_ClientIdType | 客户端编号(由服务器生成并赋值)  |
| szContractCode | TD_CodeType     | 证券合约代码            |

| 自定义类型           | 原类型        |
| --------------- | ---------- |
| TD_Text         | char [128] |
| TD_ClientIdType | char [128] |
| TD_CodeType     | char [32]  |
|                 |            |
## 6 查询最大可委托量

接口原型：

```c++
int reqQryMaxEntrustCount(TD_ReqQryMaxEntrustCount* req) 
```

参数说明：

| 参数名称 | 数据类型                      | 说明                                       |
| ---- | ------------------------- | ---------------------------------------- |
| req  | TD_ReqQryMaxEntrustCount* |                                          |
| 返回值  | int                       | 返回不为0，请求失败， 错误码（参考[数据字典](https://github.com/abramwang/QuantPlusApi_Cpp/blob/master/doc/%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8.md)11） |

TD_ReqQryMaxEntrustCount结构说明：

| 字段名            | 数据类型            | 说明                |
| -------------- | --------------- | ----------------- |
| nReqId         | int             | 请求ID（由用户维护的ID）    |
| nStragetyId    | int64_t         | 保留字段              |
| nUserInt       | int             | 保留字段              |
| nUserDouble    | double          | 保留字段              |
| szUseStr       | TD_Text         | 保留字段              |
| nUserId        | int64_t         | 用户帐号Id(API自动内部赋值) |
| szClientId     | TD_ClientIdType | 客户端编号(由服务器生成并赋值)  |
| szContractCode | TD_CodeType     | 证券合约代码            |

| 自定义类型           | 原类型        |
| --------------- | ---------- |
| TD_Text         | char [128] |
| TD_ClientIdType | char [128] |
| TD_CodeType     | char [32]  |
|                 |            |
## 7 查询资金账号当前信息

接口原型：

```c++
int reqQryAccountMaxEntrustCount(TD_ReqQryAccountMaxEntrustCount* req) 
```

参数说明：

| 参数名称 | 数据类型                             | 说明                                       |
| ---- | -------------------------------- | ---------------------------------------- |
| req  | TD_ReqQryAccountMaxEntrustCount* |                                          |
| 返回值  | int                              | 返回不为0，请求失败， 错误码（参考[数据字典](https://github.com/abramwang/QuantPlusApi_Cpp/blob/master/doc/%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8.md)11） |

TD_ReqQryAccountMaxEntrustCount结构说明：

| 字段名            | 数据类型            | 说明                |
| -------------- | --------------- | ----------------- |
| nReqId         | int             | 请求ID（由用户维护的ID）    |
| nStragetyId    | int64_t         | 保留字段              |
| nUserInt       | int             | 保留字段              |
| nUserDouble    | double          | 保留字段              |
| szUseStr       | TD_Text         | 保留字段              |
| nUserId        | int64_t         | 用户帐号Id(API自动内部赋值) |
| szClientId     | TD_ClientIdType | 客户端编号(由服务器生成并赋值)  |
| szContractCode | TD_CodeType     | 股票代码              |
| nAccountId     | int             | 资金账号              |

| 自定义类型           | 原类型        |
| --------------- | ---------- |
| TD_Text         | char [128] |
| TD_ClientIdType | char [128] |
| TD_CodeType     | char [32]  |
|                 |            |
## 8 订阅最大可委托量推送

接口原型：

```c++
int reqSubscribeMaxEntrustCount() 
```

参数说明：

| 参数名称 | 数据类型 | 说明                                       |
| ---- | ---- | ---------------------------------------- |
| 返回值  | int  | 返回不为0，请求失败， 错误码（参考[数据字典](https://github.com/abramwang/QuantPlusApi_Cpp/blob/master/doc/%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8.md)11） |
|      |      |                                          |

## 9 查询资金账号初始值信息

接口原型：

```c++
int reqQryAccountInitMaxEntrustCount(TD_ReqQryAccountMaxEntrustCount* req) 
```

参数说明：

| 参数名称 | 数据类型                         | 说明                                                         |
| -------- | -------------------------------- | ------------------------------------------------------------ |
| req      | TD_ReqQryAccountMaxEntrustCount* | 数据结构参考（7 查询资金账号当前信息请求）                   |
| 返回值   | int                              | 返回不为0，请求失败， 错误码（参考[数据字典](https://github.com/abramwang/QuantPlusApi_Cpp/blob/master/doc/%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8.md)11） |



# 交易回调接口说明

## 1 下单回调

接口原型：

```c++
void onRspOrderInsert(const TD_RspOrderInsert *rsp, int error)
```

参数说明：

| 参数名称  | 数据类型                     | 说明                                       |
| ----- | ------------------------ | ---------------------------------------- |
| rsp   | const TD_RspOrderInsert* | 回调信息                                     |
| error | int                      | 下单是否成功，非0代表失败，错误码参考（[数据字典](https://github.com/abramwang/QuantPlusApi_Cpp/blob/master/doc/%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8.md)11） |
| 返回值   | void                     |                                          |

TD_RspOrderInsert结构说明

| 字段名                | 数据类型               | 说明                                       |
| ------------------ | ------------------ | ---------------------------------------- |
| nReqId             | int                | 请求ID（由用户维护的ID）                           |
| nStragetyId        | int64_t            | 保留字段                                     |
| nUserInt           | int                | 保留字段                                     |
| nUserDouble        | double             | 保留字段                                     |
| szUseStr           | TD_Text            | 保留字段                                     |
| nUserId            | int64_t            | 用户帐号Id                                   |
| szClientId         | TD_ClientIdType    | 客户端编号                                    |
| szContractCode     | TD_CodeType        | 证券合约代码                                   |
| szContractName     | TD_CodeName        | 证券合约名称                                   |
| nTradeType         | TD_TradeType       | 交易类型（参考[数据字典](https://github.com/abramwang/QuantPlusApi_Cpp/blob/master/doc/%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8.md)8） |
| nOffsetType        | TD_OffsetType      | 开平仓类型（参考[数据字典](https://github.com/abramwang/QuantPlusApi_Cpp/blob/master/doc/%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8.md)9） |
| nOrderPrice        | int                | 委托价                                      |
| nOrderVol          | int                | 委托量                                      |
| nOrderNum          | int                | 订单分笔数                                    |
| pOrderDetail       | TD_OrderDetail*    | 订单明细（参照1下单 数据结构说明）                       |
| nCloseR            | int                | 是否是风控强平（ 0正常平仓,1为风控干预平仓,2为服务器风控策略达到强平位平仓 ） |
| nOrderOwnerId      | int64_t            | 订单所属用户UserId                             |
| nOrderId           | int64_t            | 委托单号（服务器生成，当日唯一）                         |
| nSubmitVol         | int                | 提交申报量（已报到券商的数量）                          |
| nDealedPrice       | int                | 成交均价  * 10000                            |
| nDealedVol         | int                | 成交总量                                     |
| nTotalWithDrawnVol | int                | 撤单总量                                     |
| nInValid           | int                | 废单数量                                     |
| nStatus            | TD_OrderStatusType | 状态 （参考[数据字典](https://github.com/abramwang/QuantPlusApi_Cpp/blob/master/doc/%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8.md)10） |
| szInsertTime       | TD_ISODateTimeType | 下单时间 （ 格式 yyyy-MM-dd hh:mm:ss ）          |
| nFee               | double             | 手续费                                      |

| 自定义类型              | 原类型        |
| ------------------ | ---------- |
| TD_Text            | char [128] |
| TD_ClientIdType    | char [128] |
| TD_CodeType        | char [32]  |
| TD_CodeName        | char [32]  |
| TD_ISODateTimeType | char [21]  |
|                    |            |
## 2 撤单回调

接口原型：

```c++
void onRspOrderDelete(const TD_RspOrderDelete *rsp, int error)
```

参数说明：

| 参数名称  | 数据类型                       | 说明                                       |
| ----- | -------------------------- | ---------------------------------------- |
| rsp   | const  TD_RspOrderDelete * | 回调信息                                     |
| error | int                        | 撤单是否成功，非0代表失败，错误码参考（[数据字典](https://github.com/abramwang/QuantPlusApi_Cpp/blob/master/doc/%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8.md)11） |
| 返回值   | void                       |                                          |

TD_RspOrderDelete 结构说明

| 字段名             | 数据类型            | 说明                     |
| --------------- | --------------- | ---------------------- |
| nReqId          | int             | 请求ID（由用户维护的ID）         |
| nStragetyId     | int64_t         | 保留字段                   |
| nUserInt        | int             | 保留字段                   |
| nUserDouble     | double          | 保留字段                   |
| szUseStr        | TD_Text         | 保留字段                   |
| nUserId         | int64_t         | 用户帐号Id                 |
| szClientId      | TD_ClientIdType | 客户端编号                  |
| nOrderId        | int64_t         | 原始订单服务器唯一Id            |
| szOrderStreamId | TD_OrderIdType  | 委托编号（broker 或交易所的唯一编号） |

| 自定义类型           | 原类型        |
| --------------- | ---------- |
| TD_Text         | char [128] |
| TD_ClientIdType | char [128] |
| TD_CodeType     | char [32]  |
|                 |            |

## 3 查询委托回调

接口原型：

```c++
void onRspQryOrder(const TD_RspQryOrder *rsp, int error, bool isEnd)
```

[^注]: 该接口有可能会重复触发直到最后一条IsEnd为True rsp为空的消息 

参数说明：

| 参数名称  | 数据类型                   | 说明                                       |
| ----- | ---------------------- | ---------------------------------------- |
| rsp   | const  TD_RspQryOrder* | 回调信息                                     |
| error | int                    | 查询是否成功，非0代表失败，错误码参考（[数据字典](https://github.com/abramwang/QuantPlusApi_Cpp/blob/master/doc/%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8.md)11） |
| isEnd | bool                   | 是否是最后一条                                  |
| 返回值   | void                   |                                          |

TD_RspQryOrder结构说明

| 字段名                | 数据类型               | 说明                                       |
| ------------------ | ------------------ | ---------------------------------------- |
| nReqId             | int                | 请求ID（由用户维护的ID）                           |
| nStragetyId        | int64_t            | 保留字段                                     |
| nUserInt           | int                | 保留字段                                     |
| nUserDouble        | double             | 保留字段                                     |
| szUseStr           | TD_Text            | 保留字段                                     |
| nUserId            | int64_t            | 用户帐号Id                                   |
| szClientId         | TD_ClientIdType    | 客户端编号                                    |
| szContractCode     | TD_CodeType        | 证券合约代码                                   |
| szContractName     | TD_CodeName        | 证券合约名称                                   |
| nTradeType         | TD_TradeType       | 交易类型（参考[数据字典](https://github.com/abramwang/QuantPlusApi_Cpp/blob/master/doc/%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8.md)8） |
| nOffsetType        | TD_OffsetType      | 开平仓类型（参考[数据字典](https://github.com/abramwang/QuantPlusApi_Cpp/blob/master/doc/%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8.md)9） |
| nOrderPrice        | int                | 委托价                                      |
| nOrderVol          | int                | 委托量                                      |
| nOrderNum          | int                | 订单分笔数                                    |
| pOrderDetail       | TD_OrderDetail*    | 订单明细（参照1下单数据结构说明）                        |
| nCloseR            | int                | 是否是风控强平（ 0正常平仓,1为风控干预平仓,2为服务器风控策略达到强平位平仓 ） |
| nOrderOwnerId      | int64_t            | 订单所属用户UserId                             |
| nOrderId           | int64_t            | 委托单号                                     |
| nSubmitVol         | int                | 提交申报量                                    |
| nDealedPrice       | int                | 成交均价  * 10000                            |
| nDealedVol         | int                | 成交总量                                     |
| nTotalWithDrawnVol | int                | 撤单总量                                     |
| nInValid           | int                | 废单数量                                     |
| nStatus            | TD_OrderStatusType | 状态 （参考[数据字典](https://github.com/abramwang/QuantPlusApi_Cpp/blob/master/doc/%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8.md)10） |
| szInsertTime       | TD_ISODateTimeType | 下单时间 （ 格式 yyyy-MM-dd hh:mm:ss ）          |
| nFee               | double             | 手续费                                      |
| nIndex             | int                |                                          |

| 自定义类型              | 原类型        |
| ------------------ | ---------- |
| TD_Text            | char [128] |
| TD_ClientIdType    | char [128] |
| TD_CodeType        | char [32]  |
| TD_CodeName        | char [32]  |
| TD_ISODateTimeType | char [21]  |
|                    |            |
## 4 查询成交明细回调

接口原型：

```c++
void onRspQryMatch(const TD_RspQryMatch *rsp, int error, bool isEnd)
```

[^注]: 该接口有可能会重复触发直到最后一条IsEnd为True rsp为空的消息 

参数说明：

| 参数名称  | 数据类型                   | 说明                                       |
| ----- | ---------------------- | ---------------------------------------- |
| rsp   | const  TD_RspQryOrder* | 回调信息                                     |
| error | int                    | 查询是否成功，非0代表失败，错误码参考（[数据字典](https://github.com/abramwang/QuantPlusApi_Cpp/blob/master/doc/%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8.md)11） |
| isEnd | bool                   | 是否是最后一条                                  |
| 返回值   | void                   |                                          |

TD_RspQryMatch结构说明

| 字段名               | 数据类型               | 说明                                       |
| ----------------- | ------------------ | ---------------------------------------- |
| nReqId            | int                | 请求ID（由用户维护的ID）                           |
| nStragetyId       | int64_t            | 保留字段                                     |
| nUserInt          | int                | 保留字段                                     |
| nUserDouble       | double             | 保留字段                                     |
| szUseStr          | TD_Text            | 保留字段                                     |
| nUserId           | int64_t            | 用户帐号Id                                   |
| szClientId        | TD_ClientIdType    | 客户端编号                                    |
| nOrderId          | int64_t            | 委托单号（服务器唯一ID）                            |
| szOrderStreamId   | TD_OrderIdType     | 委托编号（broker 或交易所的唯一编号）                   |
| nMatchStreamId    | int64_t            | 系统编号                                     |
| nMatchPrice       | double             | 成交价 * 10000                              |
| nMatchVol         | int                | 成交量                                      |
| szContractCode    | TD_CodeType        | 证券合约代码                                   |
| szContractName    | TD_CodeName        | 证券合约名称                                   |
| szMatchTime       | TD_ISODateTimeType | 成交时间 ( 格式 yyyy-MM-dd hh:mm:ss)           |
| nTradeType        | TD_TradeType       | 交易类型 (参照[数据字典](https://github.com/abramwang/QuantPlusApi_Cpp/blob/master/doc/%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8.md)8) |
| nAccountId        | int                | 券商资金账户Id                                 |
| szAccountNickName | TD_AccountType     | 资金账户别名                                   |
| nIndex            | int                |                                          |

| 自定义类型              | 原类型        |
| ------------------ | ---------- |
| TD_Text            | char [128] |
| TD_ClientIdType    | char [128] |
| TD_CodeType        | char [32]  |
| TD_CodeName        | char [32]  |
| TD_OrderIdType     | char [64]  |
| TD_ISODateTimeType | char [21]  |
| TD_AccountType     | char [64]  |
|                    |            |
## 5 查询持仓回调

接口原型：

```c++
void onRspQryPosition(const TD_RspQryPosition *rsp, int error, bool isEnd)
```

[^注]: 该接口有可能会重复触发直到最后一条IsEnd为True rsp为空的消息 

参数说明：

| 参数名称  | 数据类型                      | 说明                                       |
| ----- | ------------------------- | ---------------------------------------- |
| rsp   | const  TD_RspQryPosition* | 回调信息                                     |
| error | int                       | 查询是否成功，非0代表失败，错误码参考（[数据字典](https://github.com/abramwang/QuantPlusApi_Cpp/blob/master/doc/%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8.md)11） |
| isEnd | bool                      | 是否是最后一条                                  |
| 返回值   | void                      |                                          |

TD_RspQryPosition结构说明

| 字段名            | 数据类型            | 说明             |
| -------------- | --------------- | -------------- |
| nReqId         | int             | 请求ID（由用户维护的ID） |
| nStragetyId    | int64_t         | 保留字段           |
| nUserInt       | int             | 保留字段           |
| nUserDouble    | double          | 保留字段           |
| szUseStr       | TD_Text         | 保留字段           |
| nUserId        | int64_t         | 用户帐号Id         |
| szClientId     | TD_ClientIdType | 客户端编号          |
| szContractCode | TD_CodeType     | 证券合约代码         |
| nPosition      | int             | 持仓总量           |
| nPrice         | double          | 持仓均价 * 10000   |
| nProfit        | double          | 浮盈             |
| nSelltleProfit | double          | 已结算的盈利         |

| 自定义类型           | 原类型        |
| --------------- | ---------- |
| TD_Text         | char [128] |
| TD_ClientIdType | char [128] |
| TD_CodeType     | char [32]  |
|                 |            |
## 6 查询最大可委托量回调

接口原型：

```c++
void onRspQryMaxEntrustCount(const TD_RspQryMaxEntrustCount* rsp, int error, bool isEnd)
```

[^注]: 该接口有可能会重复触发直到最后一条IsEnd为True rsp为空的消息 

参数说明：

| 参数名称  | 数据类型                             | 说明                                       |
| ----- | -------------------------------- | ---------------------------------------- |
| rsp   | const  TD_RspQryMaxEntrustCount* | 回调信息                                     |
| error | int                              | 查询是否成功，非0代表失败，错误码参考（[数据字典](https://github.com/abramwang/QuantPlusApi_Cpp/blob/master/doc/%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8.md)11） |
| isEnd | bool                             | 是否是最后一条                                  |
| 返回值   | void                             |                                          |

TD_RspQryMaxEntrustCount结构说明

| 字段名                   | 数据类型                 | 说明             |
| --------------------- | -------------------- | -------------- |
| nReqId                | int                  | 请求ID（由用户维护的ID） |
| nStragetyId           | int64_t              | 保留字段           |
| nUserInt              | int                  | 保留字段           |
| nUserDouble           | double               | 保留字段           |
| szUseStr              | TD_Text              | 保留字段           |
| nUserId               | int64_t              | 用户帐号Id         |
| szClientId            | TD_ClientIdType      | 客户端编号          |
| pStockMaxEntrustCount | StockMaxEntrustCount | 可委托数量          |

StockMaxEntrustCount 结构说明

| 字段名            | 数据类型        | 说明        |
| -------------- | ----------- | --------- |
| szContractCode | TD_CodeType | 证券合约代码    |
| nMaxBuyCaptial | double      | 最大可买（单位股） |
| nMaxSellVol    | int         | 最大可卖（单位股） |

| 自定义类型           | 原类型        |
| --------------- | ---------- |
| TD_Text         | char [128] |
| TD_ClientIdType | char [128] |
| TD_CodeType     | char [32]  |
|                 |            |
## 7 查询资金账号当前信息回调

接口原型：

```c++
void onRspQryAccountMaxEntrustCount(const TD_RspQryAccountMaxEntrustCount* rsp, int error, bool isEnd)
```

[^注]: 该接口有可能会重复触发直到最后一条IsEnd为True rsp为空的消息 

参数说明：

| 参数名称  | 数据类型                                    | 说明                                       |
| ----- | --------------------------------------- | ---------------------------------------- |
| rsp   | const  TD_RspQryAccountMaxEntrustCount* | 回调信息                                     |
| error | int                                     | 查询是否成功，非0代表失败，错误码参考（[数据字典](https://github.com/abramwang/QuantPlusApi_Cpp/blob/master/doc/%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8.md)11） |
| isEnd | bool                                    | 是否是最后一条                                  |
| 返回值   | void                                    |                                          |

TD_RspQryAccountMaxEntrustCount结构说明

| 字段名                | 数据类型                     | 说明                     |
| --------------------- | ---------------------------- | ------------------------ |
| nReqId                | int                          | 请求ID（由用户维护的ID） |
| nStragetyId           | int64_t                      | 保留字段                 |
| nUserInt              | int                          | 保留字段                 |
| nUserDouble           | double                       | 保留字段                 |
| szUseStr              | TD_Text                      | 保留字段                 |
| nUserId               | int64_t                      | 用户帐号Id               |
| szClientId            | TD_ClientIdType              | 客户端编号               |
| nAccountId            | int                          | 资金账号                 |
| szAccountNickName     | TD_AccountType               | 资金账户别名             |
| nNum                  | int                          | 可用股票数               |
| pStockMaxEntrustCount | StockAccountMaxEntrustCount* | 指针偏移                 |
| bStatus               | bool                         | 资金通道是否可用         |
| nAvailableCaptial     | int                          | 资金账号层面可用资金     |
| nTotalCaptial         | int                          | 资金账号层面当日初始资金 |

StockAccountMaxEntrustCount结构说明

| 字段名             | 数据类型    | 说明                     |
| ------------------ | ----------- | ------------------------ |
| szContractCode     | TD_CodeType | 证券合约代码             |
| nTotalPosition     | int         | 持仓总量                 |
| nAvailablePosition | int         | 可卖量                   |
| nLastPosition      | int         | 资金账号层面当日初始持仓 |

| 自定义类型      | 原类型     |
| --------------- | ---------- |
| TD_Text         | char [128] |
| TD_ClientIdType | char [128] |
| TD_AccountType  | char [64]  |
| TD_CodeType     | char [32]  |
## 8 订单状态改变推送

接口原型：

```c++
void onRtnOrderStatusChangeNotice(const TD_RtnOrderStatusChangeNotice *notice)
```

[^注]: 该接口在订单状态改变时被调用 

参数说明：

| 参数名称 | 数据类型                                  | 说明                                       |
| ---- | ------------------------------------- | ---------------------------------------- |
| rsp  | const  TD_RtnOrderStatusChangeNotice* | 回调信息（参照[数据字典](https://github.com/abramwang/QuantPlusApi_Cpp/blob/master/doc/%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8.md)） |
| 返回值  | void                                  |                                          |

TD_RtnOrderStatusChangeNotice结构说明

| 字段名                | 数据类型               | 说明                                       |
| ------------------ | ------------------ | ---------------------------------------- |
| nReqId             | int                | 请求ID（由用户维护的ID）                           |
| nStragetyId        | int64_t            | 保留字段                                     |
| nUserInt           | int                | 保留字段                                     |
| nUserDouble        | double             | 保留字段                                     |
| szUseStr           | TD_Text            | 保留字段                                     |
| nUserId            | int64_t            | 用户帐号Id                                   |
| szClientId         | TD_ClientIdType    | 客户端编号                                    |
| szContractCode     | TD_CodeType        | 证券合约代码                                   |
| szContractName     | TD_CodeName        | 证券合约名称                                   |
| nTradeType         | TD_TradeType       | 交易类型（参考[数据字典](https://github.com/abramwang/QuantPlusApi_Cpp/blob/master/doc/%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8.md)8） |
| nOffsetType        | TD_OffsetType      | 开平仓类型（参考[数据字典](https://github.com/abramwang/QuantPlusApi_Cpp/blob/master/doc/%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8.md)9） |
| nOrderPrice        | int                | 委托价                                      |
| nOrderVol          | int                | 委托量                                      |
| nOrderNum          | int                | 订单分笔数                                    |
| pOrderDetail       | TD_OrderDetail*    | 订单明细（参照1.1.8数据结构说明）                      |
| nCloseR            | int                | 是否是风控强平（ 0正常平仓,1为风控干预平仓,2为服务器风控策略达到强平位平仓 ） |
| nOrderOwnerId      | int64_t            | 订单所属用户UserId                             |
| nOrderId           | int64_t            | 委托单号                                     |
| nSubmitVol         | int                | 提交申报量                                    |
| nDealedPrice       | int                | 成交均价  * 10000                            |
| nDealedVol         | int                | 成交总量                                     |
| nTotalWithDrawnVol | int                | 撤单总量                                     |
| nInValid           | int                | 废单数量                                     |
| nStatus            | TD_OrderStatusType | 状态 （参考[数据字典](https://github.com/abramwang/QuantPlusApi_Cpp/blob/master/doc/%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8.md)10） |
| szInsertTime       | TD_ISODateTimeType | 下单时间 （ 格式 yyyy-MM-dd hh:mm:ss ）          |
| nFee               | double             | 手续费                                      |

| 自定义类型              | 原类型        |
| ------------------ | ---------- |
| TD_Text            | char [128] |
| TD_ClientIdType    | char [128] |
| TD_CodeType        | char [32]  |
| TD_CodeName        | char [32]  |
| TD_ISODateTimeType | char[21]   |
|                    |            |

## 9 成交明细推送

接口原型：

```c++
void onRtnOrderMatchNotice(const TD_RtnOrderMatchNotice *notice)
```

[^注]: 该接口在订单发生成交时被调用，推送成交明细 

参数说明：

| 参数名称 | 数据类型                           | 说明   |
| ---- | ------------------------------ | ---- |
| rsp  | const  TD_RtnOrderMatchNotice* | 回调信息 |
| 返回值  | void                           |      |

TD_RtnOrderMatchNotice结构说明

| 字段名               | 数据类型               | 说明                                       |
| ----------------- | ------------------ | ---------------------------------------- |
| nReqId            | int                | 请求ID（由用户维护的ID）                           |
| nStragetyId       | int64_t            | 保留字段                                     |
| nUserInt          | int                | 保留字段                                     |
| nUserDouble       | double             | 保留字段                                     |
| szUseStr          | TD_Text            | 保留字段                                     |
| nUserId           | int64_t            | 用户帐号Id                                   |
| szClientId        | TD_ClientIdType    | 客户端编号                                    |
| nOrderId          | int64_t            | 委托编号（原始订单服务器唯一Id）                        |
| szOrderStreamId   | TD_OrderIdType     | 委托编号（broker 或交易所的唯一编号）                   |
| nMatchStreamId    | int64_t            | 系统编号                                     |
| nMatchPrice       | double             | 成交价 * 10000                              |
| nMatchVol         | int                | 成交量                                      |
| szContractCode    | TD_CodeType        | 证券合约代码                                   |
| szContractName    | TD_CodeName        | 证券合约名称                                   |
| szMatchTime       | TD_ISODateTimeType | 成交时间 ( 格式 yyyy-MM-dd hh:mm:ss)           |
| nTradeType        | TD_TradeType       | 交易类型 (参照[数据字典](https://github.com/abramwang/QuantPlusApi_Cpp/blob/master/doc/%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8.md)8) |
| nAccountId        | int                | 券商资金账户Id                                 |
| szAccountNickName | TD_AccountType     | 资金账户别名                                   |

| 自定义类型              | 原类型        |
| ------------------ | ---------- |
| TD_Text            | char [128] |
| TD_ClientIdType    | char [128] |
| TD_CodeType        | char [32]  |
| TD_CodeName        | char [32]  |
| TD_OrderIdType     | char [64]  |
| TD_ISODateTimeType | char[21]   |
| TD_AccountType     | char [64]  |
|                    |            |
## 10 持仓浮盈推送

接口原型：

```c++
void onRtnProfit(const TD_RtnProfit *notice)
```

[^注]: 该接口频率与Tick数据同步，推送持仓的的浮盈信息 

参数说明：

| 参数名称 | 数据类型                 | 说明   |
| ---- | -------------------- | ---- |
| rsp  | const  TD_RtnProfit* | 回调信息 |
| 返回值  | void                 |      |

TD_RtnProfit结构说明

| 字段名            | 数据类型            | 说明             |
| -------------- | --------------- | -------------- |
| nReqId         | int             | 请求ID（由用户维护的ID） |
| nStragetyId    | int64_t         | 保留字段           |
| nUserInt       | int             | 保留字段           |
| nUserDouble    | double          | 保留字段           |
| szUseStr       | TD_Text         | 保留字段           |
| nUserId        | int64_t         | 用户帐号Id         |
| szClientId     | TD_ClientIdType | 客户端编号          |
| szContractCode | TD_CodeType     | 证券合约代码         |
| nPosition      | int             | 持仓总量           |
| nPrice         | double          | 持仓均价 * 10000   |
| nProfit        | double          | 浮盈             |
| nSelltleProfit | double          | 已结算的盈利         |

| 自定义类型           | 原类型        |
| --------------- | ---------- |
| TD_Text         | char [128] |
| TD_ClientIdType | char [128] |
| TD_CodeType     | char [32]  |
|                 |            |
## 11 用户权限信息推送

接口原型：

```c++
void onRtnUserAuthen(const TD_QuantUserAuthen* notice)
```

[^注]: 当用户权限信息被修改时推送；登陆时也会推送一次 

参数说明：

| 参数名称 | 数据类型                       | 说明   |
| ---- | -------------------------- | ---- |
| rsp  | const  TD_QuantUserAuthen* | 回调信息 |
| 返回值  | void                       |      |

TD_QuantUserAuthen结构说明

| 字段名                        | 数据类型                                     | 说明              |
| -------------------------- | ---------------------------------------- | --------------- |
| nReqId                     | int                                      | 请求ID（由用户维护的ID）  |
| nStragetyId                | int64_t                                  | 保留字段            |
| nUserInt                   | int                                      | 保留字段            |
| nUserDouble                | double                                   | 保留字段            |
| szUseStr                   | [TD_Text]( typedef char TD_Text[128])    | 保留字段            |
| nUserId                    | int64_t                                  | 用户帐号Id          |
| szClientId                 | [TD_ClientIdType](typedef char TD_ClientIdType[128]) | 客户端编号           |
| nId                        | int64_t                                  |                 |
| nGroupId                   | int                                      | 组ID             |
| ifStopTrade                | bool                                     | 是否停机            |
| nStopTradePostion          | int                                      | 停机位(亏算资金量)      |
| nStopPercentTradePostion   | double                                   | 停机位(亏损比例)       |
| nSinglePositionHoldTime    | int                                      | 单笔持仓时间阈值        |
| nSinglePositionLoss        | int                                      | 单笔持仓亏损阈值(亏算资金量) |
| nSinglePercentPositionLoss | double                                   | 单笔持仓亏损阈值(亏损比例)  |

| 自定义类型           | 原类型        |
| --------------- | ---------- |
| TD_Text         | char [128] |
| TD_ClientIdType | char [128] |
|                 |            |
## 12 最大可委托量推送

接口原型：

```c++
void onRtnMaxEntrustCount(const TD_RspQryMaxEntrustCount* notice)
```

[^注]: 当用户可委托量被改变时推送 

参数说明：

| 参数名称 | 数据类型                             | 说明                         |
| ---- | -------------------------------- | -------------------------- |
| rsp  | const  TD_RspQryMaxEntrustCount* | 回调信息（参照6 查询最大可委托量回调数据结构说明） |
| 返回值  | void                             |                            |



## 13 查询资金账号初始值信息回调

接口原型：

```c++
void onRspQryAccountInitMaxEntrustCount(const TD_RspQryInitAccountMaxEntrustCount* rsp, int error, bool isEnd)
```

[^注]: 该接口有可能会重复触发直到最后一条IsEnd为True rsp为空的消息 

参数说明：

| 参数名称 | 数据类型                                    | 说明                                                         |
| -------- | ------------------------------------------- | ------------------------------------------------------------ |
| rsp      | const  TD_RspQryInitAccountMaxEntrustCount* | 回调信息                                                     |
| error    | int                                         | 查询是否成功，非0代表失败，错误码参考（[数据字典](https://github.com/abramwang/QuantPlusApi_Cpp/blob/master/doc/%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8.md)11） |
| isEnd    | bool                                        | 是否是最后一条                                               |
| 返回值   | void                                        |                                                              |

TD_RspQryInitAccountMaxEntrustCount结构说明

| 字段名                | 数据类型              | 说明                     |
| --------------------- | --------------------- | ------------------------ |
| nReqId                | int                   | 请求ID（由用户维护的ID） |
| nStragetyId           | int64_t               | 保留字段                 |
| nUserInt              | int                   | 保留字段                 |
| nUserDouble           | double                | 保留字段                 |
| szUseStr              | TD_Text               | 保留字段                 |
| nUserId               | int64_t               | 用户帐号Id               |
| szClientId            | TD_ClientIdType       | 客户端编号               |
| nAccountId            | int                   | 资金账号                 |
| szAccountNickName     | TD_AccountType        | 资金账户别名             |
| nNum                  | int                   | 可用股票数               |
| pStockMaxEntrustCount | StockMaxEntrustCount* | 指针偏移                 |
| bStatus               | bool                  | 资金通道是否可用         |
| nAvailableCaptial     | int                   | 资金账号层面可用资金     |

StockMaxEntrustCount 结构说明

| 字段名         | 数据类型    | 说明               |
| -------------- | ----------- | ------------------ |
| szContractCode | TD_CodeType | 证券合约代码       |
| nMaxBuyCaptial | double      | 最大可买（单位股） |
| nMaxSellVol    | int         | 最大可卖（单位股） |

| 自定义类型      | 原类型     |
| --------------- | ---------- |
| TD_Text         | char [128] |
| TD_ClientIdType | char [128] |
| TD_AccountType  | char [64]  |
| TD_CodeType     | char [32]  |

##  